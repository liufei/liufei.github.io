{"componentChunkName":"component---src-templates-blog-post-js","path":"/migrate-from-ghost-to-hexo/","result":{"data":{"site":{"siteMetadata":{"title":"Fei"}},"markdownRemark":{"id":"ae01a867-e920-51ea-b684-f56aa63fc4de","excerpt":"花了些时间将博客从 Ghost 迁移到 Hexo，专注内容，不折腾。关于 Hexo 的介绍和教程网上有很多，这里不再赘述。下文简短记录 Mac 下迁移过程，遇到的问题，以及解决方案。 安装程序 本着不折腾的原则，Node 选用 LTS…","html":"<p>花了些时间将博客从 Ghost 迁移到 Hexo，专注内容，不折腾。关于 Hexo 的介绍和教程网上有很多，这里不再赘述。下文简短记录 Mac 下迁移过程，遇到的问题，以及解决方案。</p>\n<h2>安装程序</h2>\n<p>本着不折腾的原则，Node 选用 LTS 版，主题选用稳定版。</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"># 安装node\nbrew install node4-lts\n\n# 安装hexo\nnpm i -g hexo-cli\nhexo init blog\ncd blog\nnpm i\n\n# 安装主题\ncd themes/\nwget https://github.com/iissnan/hexo-theme-next/archive/v5.0.1.zip\nunzip v5.0.1.zip\nmv hexo-theme-next-5.0.1 next\n\n# 编辑_config.yml文件，启用主题</code></pre></div>\n<p>安装过程中遇到下载很慢的问题，通过替换<code class=\"language-text\">npm</code>源来解决：</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">npm config set registry &quot;https://registry.npm.taobao.org/&quot;</code></pre></div>\n<h2>迁移数据</h2>\n<p>从 Ghost 后台导出数据为 JSON 格式，使用<a href=\"https://github.com/seoh/hexo-migrator-ghost\">hexo-migrator-ghost</a>插件导入数据至 Hexo，生成的文件保存在<code class=\"language-text\">source/_drafts/</code>和<code class=\"language-text\">source/_posts/</code>目录，手动修正部分格式错误。</p>\n<h2>配置站点</h2>\n<h3>修正标签路径</h3>\n<p>Ghost 默认标签路径为<code class=\"language-text\">/tag/</code>，而 Hexo 默认标签路径为<code class=\"language-text\">/tags/</code>；Ghost 标签路径名全部小写，而 Hexo 默认标签路径名保持不变；以上问题，修改<code class=\"language-text\">_config.yml</code>配置文件：</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">tag_dir</span><span class=\"token punctuation\">:</span> tag\n\n<span class=\"token key atrule\">tag_map</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">Android</span><span class=\"token punctuation\">:</span> android\n  <span class=\"token key atrule\">Kindle</span><span class=\"token punctuation\">:</span> kindle\n  <span class=\"token key atrule\">WordPress</span><span class=\"token punctuation\">:</span> wordpress</code></pre></div>\n<h3>修正页面标题</h3>\n<p>博客原有<code class=\"language-text\">title</code>规则是文章或页面标题加上<code class=\"language-text\">- biped</code>，为确保一致，通过修改各个主题模版内的<code class=\"language-text\">block title</code>部分解决。</p>\n<h3>指定文章展示数目</h3>\n<p>期望每页展示最新 3 篇文章的标题和内容，归档页展示所有文章标题，并且不生成按年索引和按月索引，修改<code class=\"language-text\">_config.yml</code>配置文件：</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">index_generator</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">per_page</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n\n<span class=\"token key atrule\">archive_generator</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">per_page</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span>\n  <span class=\"token key atrule\">yearly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n  <span class=\"token key atrule\">monthly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n<h3>搜索引擎优化</h3>\n<p>保存在<code class=\"language-text\">source</code>目录下的文件会在生成站点时直接复制到站点根目录，因而可以用来创建图片上传目录，头像和 favicon 等静态文件的目录，以及自定义 html 页面。</p>\n<p>创建 404 页面，保存到<code class=\"language-text\">source</code>目录，并指定 Hexo 跳过对该页面的渲染：</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">skip_render</span><span class=\"token punctuation\">:</span> 404.html</code></pre></div>\n<p>创建 robots 文件，保存到<code class=\"language-text\">source</code>目录，禁止爬取重复内容和无关文件：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">User-agent: *\nSitemap: http://biped.me/sitemap.xml\nDisallow: /page/\nDisallow: /404.html\nDisallow: /CNAME\nDisallow: /feed.xml</code></pre></div>\n<p>使用<a href=\"https://github.com/hexojs/hexo-generator-feed\">hexo-generator-feed</a>插件生成 RSS，使用<a href=\"https://github.com/hexojs/hexo-generator-sitemap\">hexo-generator-sitemap</a>插件生成 sitemap。</p>\n<h2>实时预览</h2>\n<p>使用<a href=\"https://github.com/hexojs/hexo-browsersync\">hexo-browsersync</a>插件实现实时预览文章内容变更，或主题样式修改：</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">npm i -S hexo-browsersync\nhexo s</code></pre></div>\n<h2>解析域名</h2>\n<p>Github 有两种绑定域名的方式，一是将二级域名 CNAME 到 Github Pages 地址，二是添加 A 记录将顶级域名指向 Github 提供的 ip 地址。第一种方式可以很好的使用 Github CDN，第二种方式什么都没有。折中的办法是在 DNSPod 将顶级域名 CNAME 到 Github Pages 地址，但这样会导致 CNAME 记录和 MX 记录冲突，一些老旧的邮件服务无法正常发送邮件到该域名。</p>\n<h2>线上部署</h2>\n<p>使用<a href=\"https://github.com/hexojs/hexo-deployer-git\">hexo-deployer-git</a>部署博客到 Github 的过程中可能会遇到代码提交非常慢的问题，通过设置 Git 代理解决。</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"># 本带SS代理端口1080\ngit config --global http.proxy socks5://127.0.0.1:1080</code></pre></div>","frontmatter":{"title":"从Ghost迁移到Hexo","date":"2015-05-26","description":"用Ghost写博客的体验特别好，但还是要维护服务器，迁移到Hexo更省心。"}}},"pageContext":{"slug":"/migrate-from-ghost-to-hexo/","previous":{"fields":{"slug":"/gitlab-qq-email/"},"frontmatter":{"title":"GitLab配置腾讯企业邮箱"}},"next":{"fields":{"slug":"/vagrant-nodejs-slow/"},"frontmatter":{"title":"Vagrant下Node.js程序缓慢问题"}}}},"staticQueryHashes":["2841359383","4265873673"]}